refactor views to separate classes
add user permissions
write unittests

fix message close button
